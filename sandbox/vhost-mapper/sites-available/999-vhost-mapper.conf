<VirtualHost *:80>
        ServerAlias *.*.sandbox
        ServerAdmin $1.0@le-phare.com

        DocumentRoot /mapper
        UseCanonicalName off
        VirtualDocumentRoot "/mapper/%2.0/web"

        Alias /cgi-bin/ /var/www/cgi-bin/

        <Directory "/mapper/%2/web">
                AllowOverride All
        </Directory>

        AddHandler php5-fcgi .php
        Action php5-fcgi /cgi-bin/php5-fcgi


        RewriteEngine on

</VirtualHost>

<VirtualHost *:80>
	ServerAlias *.sandbox
	ServerAdmin $1.0@le-phare.com

	DocumentRoot /mapper
	UseCanonicalName off
	VirtualDocumentRoot "/mapper/%1.0/web"

	Alias /cgi-bin/ /var/www/cgi-bin/

	<Directory "/mapper/%1/web">
		AllowOverride All
	</Directory>

  AddHandler php5-fcgi .php
  Action php5-fcgi /cgi-bin/php5-fcgi


	RewriteEngine on

</VirtualHost>

<IfModule mod_ssl.c>

    <VirtualHost *:443>

        ServerAlias *.*.sandbox
        ServerAdmin $1.0@le-phare.com

        DocumentRoot /mapper
        UseCanonicalName off
        VirtualDocumentRoot "/mapper/%2.0/web"

        #   Enable/Disable SSL for this virtual host.
        SSLEngine on

        #   A self-signed (snakeoil) certificate can be created by installing
        #   the ssl-cert package. See
        #   /usr/share/doc/apache2/README.Debian.gz for more info.
        #   If both key and certificate are stored in the same file, only the
        #   SSLCertificateFile directive is needed.
        SSLCertificateFile  /etc/apache2/ssl/sandbox.crt
        SSLCertificateKeyFile /etc/apache2/ssl/sandbox.key

        #   SSL Protocol Adjustments:
        BrowserMatch "MSIE [2-6]" \
                nokeepalive ssl-unclean-shutdown \
                downgrade-1.0 force-response-1.0
        # MSIE 7 and newer should be able to use keepalive
        BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown


        Alias /cgi-bin/ /var/www/cgi-bin/

        <Directory "/mapper/%2/web">
                AllowOverride All
        </Directory>

        AddHandler php5-fcgi .php
        Action php5-fcgi /cgi-bin/php5-fcgi

        RewriteEngine on

    </VirtualHost>

    <VirtualHost *:443>

        ServerAlias *.sandbox
        ServerAdmin $1.0@le-phare.com

        DocumentRoot /mapper
        UseCanonicalName off
        VirtualDocumentRoot "/mapper/%1.0/web"

        #   Enable/Disable SSL for this virtual host.
        SSLEngine on

        #   A self-signed (snakeoil) certificate can be created by installing
        #   the ssl-cert package. See
        #   /usr/share/doc/apache2/README.Debian.gz for more info.
        #   If both key and certificate are stored in the same file, only the
        #   SSLCertificateFile directive is needed.
        SSLCertificateFile  /etc/apache2/ssl/sandbox.crt
        SSLCertificateKeyFile /etc/apache2/ssl/sandbox.key

        #   SSL Protocol Adjustments:
        BrowserMatch "MSIE [2-6]" \
                nokeepalive ssl-unclean-shutdown \
                downgrade-1.0 force-response-1.0
        # MSIE 7 and newer should be able to use keepalive
        BrowserMatch "MSIE [17-9]" ssl-unclean-shutdown


        Alias /cgi-bin/ /var/www/cgi-bin/

        <Directory "/mapper/%1/web">
                AllowOverride All
        </Directory>

        AddHandler php5-fcgi .php
        Action php5-fcgi /cgi-bin/php5-fcgi

        RewriteEngine on

    </VirtualHost>

</IfModule>
